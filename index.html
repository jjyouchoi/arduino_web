<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Teachable Machine to Arduino (Bluetooth)</title>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image"></script>
<style>
body { font-family: sans-serif; text-align: center; padding: 20px; }
video { width: 300px; height: 225px; margin-bottom: 10px; }
button { font-size: 16px; padding: 10px; margin: 10px; }
</style>
</head>
<body>
<h2>Teachable Machine to Arduino (via Bluetooth)</h2>
<video id="webcam" autoplay playsinline muted></video>
<div>
<button onclick="connectBluetooth()">ğŸ”µ ë¸”ë£¨íˆ¬ìŠ¤ ì—°ê²°</button>
</div>
<div id="status">ëª¨ë¸ ë¡œë”© ì¤‘...</div>


<script>
const MODEL_URL = "https://teachablemachine.withgoogle.com/models/YOUR_MODEL_ID/"; // <-- ì—¬ê¸°ì— ëª¨ë¸ ID ì…ë ¥
let model, webcam, maxPredictions;
let port, writer;


async function connectBluetooth() {
try {
port = await navigator.serial.requestPort();
await port.open({ baudRate: 9600 });
writer = port.writable.getWriter();
document.getElementById("status").innerText = "âœ… ë¸”ë£¨íˆ¬ìŠ¤ ì—°ê²° ì™„ë£Œ";
} catch (e) {
alert("ë¸”ë£¨íˆ¬ìŠ¤ ì—°ê²° ì‹¤íŒ¨: " + e);
}
}


async function init() {
const modelURL = MODEL_URL + "model.json";
const metadataURL = MODEL_URL + "metadata.json";


model = await tmImage.load(modelURL, metadataURL);
maxPredictions = model.getTotalClasses();


webcam = new tmImage.Webcam(300, 225, true);
await webcam.setup();
await webcam.play();
window.requestAnimationFrame(loop);


document.getElementById("webcam").appendChild(webcam.canvas);
document.getElementById("status").innerText = "ëª¨ë¸ ì¤€ë¹„ ì™„ë£Œ";
}


async function loop() {
webcam.update();
</html>
